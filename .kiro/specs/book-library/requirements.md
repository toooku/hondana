# 蔵書管理アプリケーション - 要件定義書

## 概要

個人の蔵書を管理・閲覧するための静的サイト生成型アプリケーション。ISBNを使用して本を登録し、OpenBD APIから書誌情報を自動取得。本ごとに感想を投稿でき、管理画面で本と感想のCRUD操作が可能。最終的には静的HTMLサイトとして公開される。

## 用語集

- **蔵書管理システム**: このアプリケーション全体を指す
- **本**: ISBNで識別される書籍。書誌情報（タイトル、著者、出版社など）を含む
- **感想**: 特定の本に紐づくユーザーの記録・評価・コメント
- **ISBN**: 国際標準図書番号。本の一意な識別子
- **OpenBD API**: 日本の書誌情報を提供するAPI（https://openbd.jp/）
- **静的サイト**: HTMLファイルで構成され、サーバーサイド処理を必要としないウェブサイト
- **管理機能**: 本と感想のCRUD操作を行うインターフェース
- **閲覧機能**: 登録された本と感想を表示するインターフェース

## 要件

### 要件1: 本の登録と書誌情報の自動取得

**ユーザーストーリー**: 管理者として、ISBNを入力して本を登録したい。そうすることで、OpenBD APIから自動的に書誌情報を取得し、手動入力の手間を削減したい。

#### 受け入れ基準

1. WHEN 管理画面でISBNを入力して登録ボタンを押す THEN 蔵書管理システムは OpenBD APIに問い合わせて書誌情報を取得する
2. WHEN OpenBD APIから書誌情報が正常に取得される THEN 蔵書管理システムは本のレコードを作成し、タイトル、著者、出版社、出版日などの情報を保存する
3. WHEN 指定されたISBNがOpenBD APIに存在しない THEN 蔵書管理システムはエラーメッセージを表示し、本の登録を中止する
4. WHEN 本が正常に登録される THEN 蔵書管理システムは登録完了メッセージを表示する

### 要件2: 本の一覧表示と詳細表示

**ユーザーストーリー**: 管理者として、登録した本の一覧を確認したい。また、特定の本の詳細情報と関連する感想を確認したい。

#### 受け入れ基準

1. WHEN CLIコマンドで本一覧を表示する THEN 蔵書管理システムは登録されているすべての本をテーブル形式で表示する
2. WHEN CLIコマンドで本のIDを指定する THEN 蔵書管理システムは当該本の詳細情報と関連する感想をすべて表示する
3. WHEN 本の詳細が表示される THEN 蔵書管理システムは本のタイトル、著者、出版社、出版日、ISBN、登録日を表示する

### 要件3: 本の更新と削除

**ユーザーストーリー**: 管理者として、登録した本の情報を修正したい。また、不要になった本を削除したい。

#### 受け入れ基準

1. WHEN CLIコマンドで本のIDと新しい情報を指定する THEN 蔵書管理システムは本の情報を更新し、更新完了メッセージを表示する
2. WHEN CLIコマンドで本のIDを指定して削除を実行する THEN 蔵書管理システムは当該本と関連するすべての感想を削除し、削除完了メッセージを表示する
3. WHEN 削除コマンドが実行される THEN 蔵書管理システムは確認プロンプトを表示する

### 要件4: 感想の投稿と管理

**ユーザーストーリー**: 管理者として、読んだ本に対して感想を投稿したい。また、投稿した感想を編集・削除したい。

#### 受け入れ基準

1. WHEN CLIコマンドで本のIDと感想テキストを指定する THEN 蔵書管理システムは感想レコードを作成し、本に紐づけて保存する
2. WHEN 感想が投稿される THEN 蔵書管理システムは投稿日時を自動的に記録する
3. WHEN CLIコマンドで感想のIDと新しいテキストを指定する THEN 蔵書管理システムは感想を更新し、更新日時を記録する
4. WHEN CLIコマンドで感想のIDを指定して削除を実行する THEN 蔵書管理システムは感想を削除する

### 要件5: 閲覧機能（公開ページ）

**ユーザーストーリー**: 蔵書と感想を静的なHTMLサイトとして公開したい。そうすることで、サーバーサイド処理を必要とせず、低コストでホスティングできる。

#### 受け入れ基準

1. WHEN 静的サイト生成コマンドを実行する THEN 蔵書管理システムは登録されているすべての本と感想からHTMLファイルを生成する
2. WHEN HTMLサイトが生成される THEN 蔵書管理システムは本の一覧ページと各本の詳細ページを含むサイト構造を作成する
3. WHEN 詳細ページが生成される THEN 蔵書管理システムは当該本の書誌情報と関連するすべての感想を表示する
4. WHEN 生成されたHTMLサイトにアクセスする THEN 蔵書管理システムは最小限のスタイルで本と感想を表示する

### 要件6: データの永続化

**ユーザーストーリー**: 管理者として、登録した本と感想のデータが安全に保存されることを確認したい。

#### 受け入れ基準

1. WHEN 本または感想が作成・更新・削除される THEN 蔵書管理システムはデータをファイルシステムに永続化する
2. WHEN アプリケーションが再起動される THEN 蔵書管理システムは永続化されたデータを読み込み、以前の状態を復元する
3. WHEN データファイルが破損する THEN 蔵書管理システムはエラーメッセージを表示し、適切に対応する

### 要件7: 最小限のUI/UXデザイン

**ユーザーストーリー**: 管理者として、シンプルで使いやすいインターフェースで本と感想を管理したい。

#### 受け入れ基準

1. WHEN 静的サイトが生成される THEN 蔵書管理システムは過剰な装飾なしに、必要な情報のみを表示する
2. WHEN HTMLサイトが生成される THEN 蔵書管理システムは基本的なHTMLとCSSのみを使用し、複雑なJavaScriptフレームワークに依存しない
3. WHEN CLIコマンドが実行される THEN 蔵書管理システムは明確なメッセージと直感的なコマンド構造を提供する
